generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL")
}

model User {
  id            String        @id @default(uuid())
  createdAt     DateTime      @default(now())
  email         String        @unique
  password      String
  subscription  Subscription?
  updatedAt     DateTime?     @updatedAt
}

model Subscription {
  id              String              @id @default(uuid())
  userId          String              @unique
  user            User                @relation(fields: [userId], references: [id])
  plan            PlanStatus          
  status          SubscriptionStatus
  startDate       DateTime
  endDate         DateTime?
  renewedAt       DateTime?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt
}

model Invoice {
  id               String       @id @default(uuid())
  createdAt        DateTime     @default(now())
  invoiceId        String       @unique
  invoiceTitle     String
  fromName         String
  fromEmail        String
  fromAddress      String
  fromPhone        String
  fromBusiness     String?
  billToName       String
  billToEmail      String
  billToAddress    String
  billToPhone      String
  billToMobile     String?
  billToFax        String?
  invoiceNumber    String
  date             String
  terms            String
  lineItems        Json[]
  taxData          Json
  subtotal         Decimal
  tax              Decimal
  total            Decimal
  balance          Decimal
  signatureUrl     String
  discountData     Json
  templateColour   String
  userEmail        String
  selectedCurrency Json
  notes            String
}

model ImageUpload {
  id        String      @id @default(uuid())
  createdAt DateTime    @default(now())
  userEmail String
  invoiceId String      @unique
  url       String      @unique
  fileId    String      @unique
}

enum SubscriptionStatus {
  ACTIVE
  EXPIRED
  CANCELED
}

enum PlanStatus {
  MONTHLY
  ANNUAL
}